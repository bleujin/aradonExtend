<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset=utf-8 />
	<meta name="viewport" content="width=620" />
	<title>HTML5 Demo: postMessage (cross domain)</title>
	<link rel="stylesheet" href="/css/html5demos.css" type="text/css" />
	<style>
	iframe {
	  width: 100%;
	  border: 2px solid #ccc;
	}
	</style>
	<script src="html5utils.js"></script>
</head>

<body>
<section id="wrapper">
    <header>
      <h1>postMessage (cross domain)</h1>

    </header>

    <article>
      <form>
      <p><label for="message">Message</label><input type="text" name="message" value="my message" id="message" /> <input type="submit" />
      </p>
      <h2>Target iframe:</h2>

      <iframe id="iframe" src="http://61.250.201.78:9002/testload/hello"></iframe>
      </form>
    </article>
    
</section>

<script>
	var win = document.getElementById("iframe").contentWindow;
	
	addEvent(document.querySelector('form'), 'submit', function (e) {
		win.postMessage(
			'param=' + document.getElementById("message").value,
			"*"
		);
	
		/*
		if (e.preventDefault)
			e.preventDefault();
		// otherwise set the returnValue property of the original event to false (IE)
		e.returnValue = false;
		*/
	});
</script>    


</body>
</html>
